{% comment %}
  AURALIA RIFT GATE
  Version: 5.2 (Z-Index Fix & CN Localization)
  Author: The Code Alchemist
{% endcomment %}

{%- style -%}
  #shopify-section-{{ section.id }} {
    --gate-height-pc: {{ section.settings.section_height_pc }}vh;
    --gate-height-mb: {{ section.settings.section_height_mb }}vh;
    --base-gold: #D4AF37;
    --void-bg: #050505;
    /* æ¶²å‹é˜»å°¼æ„Ÿæ›²çº¿ */
    --transition-curve: cubic-bezier(0.22, 1, 0.36, 1); 
    --overlay-color: #000000;
  }

  .rift-wrapper {
    display: flex;
    width: 100%;
    height: var(--gate-height-pc);
    position: relative;
    overflow: hidden;
    background-color: var(--void-bg);
    /* ç¡®ä¿å®¹å™¨æœ¬èº«ä¸ä¼šæ„å¤–è¦†ç›–å…¶ä»–å±‚çº§ */
    z-index: 0;
  }

  /* --- [ é¢æ¿ ] --- */
  .rift-panel {
    position: relative;
    flex: 1; 
    height: 100%;
    overflow: hidden;
    transition: all 1.2s var(--transition-curve); 
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    filter: brightness(0.9);
    /* å…³é”®ä¿®æ­£ï¼šé»˜è®¤å±‚çº§è®¾ä¸º 1ï¼Œç¡®ä¿åœ¨ Header ä¹‹ä¸‹ */
    z-index: 1;
  }

  /* --- [ äº¤äº’é€»è¾‘ ] --- */
  @media (hover: hover) {
    .rift-wrapper:hover .rift-panel {
      filter: brightness(0.4) grayscale(1) blur(6px); 
      flex: 0.8; 
    }
    
    .rift-wrapper .rift-panel:hover {
      flex: 3; 
      filter: brightness(1.05) grayscale(0) blur(0px); 
      /* å…³é”®ä¿®æ­£ï¼šæ‚¬åœæ—¶å±‚çº§æå‡åˆ° 3ï¼Œä¾ç„¶è¿œä½äº Header (é€šå¸¸æ˜¯ 10+) */
      z-index: 3;
      box-shadow: 0 0 50px rgba(0,0,0,0.8); 
    }
  }

  /* --- [ åª’ä½“å±‚ ] --- */
  .rift-media-container {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    z-index: 0; /* ä½äºæœ€åº•å±‚ */
  }
  
  .rift-media-container img,
  .rift-media-container video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 1.5s var(--transition-curve);
    will-change: transform;
  }

  .rift-panel:hover .rift-media-container img,
  .rift-panel:hover .rift-media-container video {
    transform: scale(1.1);
  }

  /* --- [ é®ç½© ] --- */
  .rift-overlay {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background: radial-gradient(circle at center, transparent 0%, var(--overlay-color) 90%);
    opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }};
    z-index: 1;
    pointer-events: none;
  }

  /* å™ªç‚¹ */
  .rift-panel::after {
    content: "";
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.5'/%3E%3C/svg%3E");
    opacity: 0.15;
    pointer-events: none;
    z-index: 2;
    mix-blend-mode: overlay;
  }

  /* --- [ é‡‘çº¿åˆ†å‰² ] --- */
  .rift-divider {
    position: absolute;
    left: 50%;
    top: 10%; bottom: 10%; 
    width: 1px;
    background: linear-gradient(to bottom, transparent, var(--base-gold), transparent);
    /* å…³é”®ä¿®æ­£ï¼šå±‚çº§è®¾ä¸º 4ï¼Œé«˜äºå†…å®¹ä½†ä½äº Header */
    z-index: 4; 
    pointer-events: none;
    transition: left 1.2s var(--transition-curve), opacity 0.5s ease;
    box-shadow: 0 0 8px var(--base-gold);
    animation: gold-pulse 4s infinite ease-in-out;
  }

  @keyframes gold-pulse {
    0%, 100% { opacity: 0.4; box-shadow: 0 0 5px var(--base-gold); }
    50% { opacity: 0.8; box-shadow: 0 0 15px var(--base-gold); }
  }

  .rift-wrapper:hover .rift-divider {
    opacity: 0; 
    transition-duration: 0.3s;
  }

  /* --- [ å†…å®¹æ’ç‰ˆ ] --- */
  .rift-content {
    position: relative;
    /* å…³é”®ä¿®æ­£ï¼šå†…å®¹å±‚çº§è®¾ä¸º 2ï¼Œç¡®ä¿åœ¨é®ç½©ä¹‹ä¸Šï¼Œä½†åœ¨ Header ä¹‹ä¸‹ */
    z-index: 2;
    text-align: center;
    color: #fff;
    padding: 40px;
    max-width: 500px;
    opacity: 1;
    transform: translateY(0);
    transition: all 0.8s var(--transition-curve);
  }

  .rift-wrapper:hover .rift-panel:not(:hover) .rift-content {
    opacity: 0;
    transform: translateY(20px);
  }
  
  .rift-panel:hover .rift-content {
    transform: translateY(-10px);
  }

  .rift-subtitle {
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5em;
    color: var(--base-gold);
    margin-bottom: 20px;
    display: block;
    opacity: 0.9;
  }

  .rift-title {
    font-family: var(--font-heading-family);
    font-size: clamp(32px, 5vw, 60px);
    font-weight: 300; 
    line-height: 1.1;
    letter-spacing: 0.02em;
    margin-bottom: 40px;
    text-shadow: 0 10px 30px rgba(0,0,0,0.9);
  }

  .rift-btn {
    display: inline-block;
    padding: 14px 36px;
    border: 1px solid rgba(255,255,255,0.2);
    color: #fff;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.25em;
    transition: all 0.5s ease;
    background: rgba(0,0,0,0.3);
    backdrop-filter: blur(4px);
  }

  .rift-panel:hover .rift-btn {
    border-color: var(--base-gold);
    color: var(--base-gold);
    background: rgba(0,0,0,0.6);
    box-shadow: 0 0 25px rgba(212, 175, 55, 0.2);
  }

  @media screen and (max-width: 768px) {
    .rift-wrapper { flex-direction: column; height: var(--gate-height-mb); }
    .rift-panel { width: 100%; flex: 1 !important; filter: none !important; }
    .rift-divider { width: 80%; height: 1px; left: 10%; top: 50%; bottom: auto; }
    .rift-content { opacity: 1 !important; transform: none !important; }
    .rift-title { font-size: 32px; }
  }
{%- endstyle -%}

<div class="rift-wrapper">
  
  <div class="rift-divider"></div>

  {% comment %} === å·¦é—¨ (é˜´/çµ) === {% endcomment %}
  <a href="{{ section.settings.link_1 }}" class="rift-panel panel-left">
    <div class="rift-media-container">
      {% if section.settings.video_1 != blank %}
        {{ section.settings.video_1 | video_tag: autoplay: true, loop: true, muted: true, playsinline: true, controls: false, image_size: '1200x' }}
      {% elsif section.settings.image_1 != blank %}
        {{ section.settings.image_1 | image_url: width: 1600 | image_tag: loading: 'lazy', alt: section.settings.title_1 }}
      {% else %}
        <div style="width:100%;height:100%;background:#0a0a0a;"></div>
      {% endif %}
    </div>
    <div class="rift-overlay"></div>
    
    <div class="rift-content">
      <span class="rift-subtitle">{{ section.settings.subtitle_1 }}</span>
      <h2 class="rift-title">{{ section.settings.title_1 }}</h2>
      <span class="rift-btn">{{ section.settings.btn_1 }}</span>
    </div>
  </a>

  {% comment %} === å³é—¨ (é˜³/ç‰©) === {% endcomment %}
  <a href="{{ section.settings.link_2 }}" class="rift-panel panel-right">
    <div class="rift-media-container">
      {% if section.settings.video_2 != blank %}
        {{ section.settings.video_2 | video_tag: autoplay: true, loop: true, muted: true, playsinline: true, controls: false, image_size: '1200x' }}
      {% elsif section.settings.image_2 != blank %}
        {{ section.settings.image_2 | image_url: width: 1600 | image_tag: loading: 'lazy', alt: section.settings.title_2 }}
      {% else %}
        <div style="width:100%;height:100%;background:#111;"></div>
      {% endif %}
    </div>
    <div class="rift-overlay"></div>
    
    <div class="rift-content">
      <span class="rift-subtitle">{{ section.settings.subtitle_2 }}</span>
      <h2 class="rift-title">{{ section.settings.title_2 }}</h2>
      <span class="rift-btn">{{ section.settings.btn_2 }}</span>
    </div>
  </a>

</div>

{% schema %}
{
  "name": "â›©ï¸ é˜´é˜³è£‚éš™ (åŒç•Œé—¨)",
  "settings": [
    {
      "type": "header",
      "content": "ğŸ“ å°ºå¯¸ä¸å¸ƒå±€"
    },
    {
      "type": "range",
      "id": "section_height_pc",
      "min": 50,
      "max": 100,
      "step": 5,
      "unit": "vh",
      "label": "ç”µè„‘ç«¯é«˜åº¦ (Screen Height)",
      "default": 95
    },
    {
      "type": "range",
      "id": "section_height_mb",
      "min": 60,
      "max": 100,
      "step": 5,
      "unit": "vh",
      "label": "æ‰‹æœºç«¯é«˜åº¦ (Screen Height)",
      "default": 80
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "min": 0,
      "max": 90,
      "step": 10,
      "unit": "%",
      "label": "æš—è§’å‹æš—æµ“åº¦ (Vignette)",
      "default": 30
    },
    {
      "type": "header",
      "content": "ğŸŒ‘ å·¦é—¨é…ç½® (SPIRIT / YIN)"
    },
    {
      "type": "video",
      "id": "video_1",
      "label": "èƒŒæ™¯è§†é¢‘ (å»ºè®®: å¾®åŠ¨/è™šç©º)"
    },
    {
      "type": "image_picker",
      "id": "image_1",
      "label": "å¤‡ç”¨å›¾ç‰‡ (æ— è§†é¢‘æ—¶æ˜¾ç¤º)"
    },
    {
      "type": "text",
      "id": "subtitle_1",
      "label": "å°æ ‡é¢˜ (Subtitle)",
      "default": "THE VOID"
    },
    {
      "type": "text",
      "id": "title_1",
      "label": "ä¸»æ ‡é¢˜ (Heading)",
      "default": "Spirit"
    },
    {
      "type": "text",
      "id": "btn_1",
      "label": "æŒ‰é’®æ–‡æ¡ˆ",
      "default": "ENTER"
    },
    {
      "type": "url",
      "id": "link_1",
      "label": "è·³è½¬é“¾æ¥"
    },
    {
      "type": "header",
      "content": "ğŸŒ• å³é—¨é…ç½® (MATTER / YANG)"
    },
    {
      "type": "video",
      "id": "video_2",
      "label": "èƒŒæ™¯è§†é¢‘ (å»ºè®®: å®ä½“/å…‰å½±)"
    },
    {
      "type": "image_picker",
      "id": "image_2",
      "label": "å¤‡ç”¨å›¾ç‰‡"
    },
    {
      "type": "text",
      "id": "subtitle_2",
      "label": "å°æ ‡é¢˜ (Subtitle)",
      "default": "THE FORM"
    },
    {
      "type": "text",
      "id": "title_2",
      "label": "ä¸»æ ‡é¢˜ (Heading)",
      "default": "Matter"
    },
    {
      "type": "text",
      "id": "btn_2",
      "label": "æŒ‰é’®æ–‡æ¡ˆ",
      "default": "EXPLORE"
    },
    {
      "type": "url",
      "id": "link_2",
      "label": "è·³è½¬é“¾æ¥"
    }
  ],
  "presets": [
    {
      "name": "â›©ï¸ é˜´é˜³è£‚éš™ (åŒç•Œé—¨)"
    }
  ]
}
{% endschema %}
