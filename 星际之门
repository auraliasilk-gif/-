{% comment %}
  Auraliasilk 5.1 - The Rift Gate (Yin & Yang Dynamics)
  Concept: Spirit (Video) vs. Matter (Video).
  Interaction: Ebb and Flow with Blur/Grayscale recession.
{% endcomment %}

{%- style -%}
  #shopify-section-{{ section.id }} {
    --gate-height-pc: {{ section.settings.section_height_pc }}vh;
    --gate-height-mb: {{ section.settings.section_height_mb }}vh;
    --base-gold: #D4AF37;
    --void-bg: #050505;
    /* æåº¦ä¼˜é›…çš„â€œé‡é—¨â€æƒ¯æ€§ï¼Œæ¨¡æ‹Ÿæ¶²å‹æˆ–å¤ªææ¨æ‰‹çš„é˜»å°¼æ„Ÿ */
    --transition-curve: cubic-bezier(0.22, 1, 0.36, 1); 
    --overlay-color: #000000;
  }

  .rift-wrapper {
    display: flex;
    width: 100%;
    height: var(--gate-height-pc);
    position: relative;
    overflow: hidden;
    background-color: var(--void-bg);
  }

  /* --- [ æ ¸å¿ƒé¢æ¿ï¼šæ°”éŸµæµåŠ¨ ] --- */
  .rift-panel {
    position: relative;
    flex: 1; /* é»˜è®¤ 50% */
    height: 100%;
    overflow: hidden;
    transition: all 1.2s var(--transition-curve); /* å»¶é•¿æ—¶é—´ä»¥å¢åŠ æ²‰æµ¸æ„Ÿ */
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    /* é»˜è®¤çŠ¶æ€ï¼šè½»å¾®å‹æš— */
    filter: brightness(0.9);
  }

  /* --- [ äº¤äº’é€»è¾‘ï¼šé˜´é˜³æ¶ˆé•¿ ] --- */
  @media (hover: hover) {
    /* 1. å½“é¼ æ ‡è¿›å…¥å®¹å™¨ï¼šæ•´ä½“è¿›å…¥â€œå¾…å®šâ€çŠ¶æ€ */
    .rift-wrapper:hover .rift-panel {
      filter: brightness(0.4) grayscale(1) blur(6px); /* é—²ç½®æ–¹ï¼šé»‘ç™½ã€æ¨¡ç³Šã€æ™¦æš— */
      flex: 0.8; /* é—²ç½®æ–¹æ”¶ç¼© */
    }
    
    /* 2. å½“é¼ æ ‡èšç„¦ç‰¹å®šé¢æ¿ï¼šæ¿€æ´»â€œæ˜¾åŒ–â€çŠ¶æ€ */
    .rift-wrapper .rift-panel:hover {
      flex: 3; /* æ‰©å¼ è‡³ 75% å·¦å³ï¼Œæ›´æœ‰å¼ åŠ› */
      filter: brightness(1.05) grayscale(0) blur(0px); /* æ¿€æ´»æ–¹ï¼šå…¨å½©ã€æ¸…æ™°ã€é«˜äº® */
      z-index: 5;
      box-shadow: 0 0 50px rgba(0,0,0,0.8); /* å¢åŠ å±‚çº§æ·±åº¦æ„Ÿ */
    }
  }

  /* --- [ åª’ä½“å±‚ï¼šè§†é¢‘ä¸å›¾ç‰‡ ] --- */
  .rift-media-container {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    z-index: 0;
  }
  
  .rift-media-container img,
  .rift-media-container video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 1.5s var(--transition-curve);
    will-change: transform;
  }

  /* æ‚¬åœæ—¶çš„è§†å·®æ¨è¿›æ„Ÿ */
  .rift-panel:hover .rift-media-container img,
  .rift-panel:hover .rift-media-container video {
    transform: scale(1.1);
  }

  /* --- [ é®ç½©ä¸æè´¨ ] --- */
  .rift-overlay {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background: radial-gradient(circle at center, transparent 0%, var(--overlay-color) 90%);
    opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }};
    z-index: 1;
    pointer-events: none;
  }

  /* å™ªç‚¹çº¹ç†ï¼šç»Ÿä¸€è§†è§‰è´¨æ„Ÿï¼Œæ¶ˆé™¤è§†é¢‘æ•°ç å‘³ */
  .rift-panel::after {
    content: "";
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.5'/%3E%3C/svg%3E");
    opacity: 0.15;
    pointer-events: none;
    z-index: 2;
    mix-blend-mode: overlay;
  }

  /* --- [ é‡‘çº¿ï¼šå‘¼å¸çš„è¾¹ç•Œ ] --- */
  .rift-divider {
    position: absolute;
    left: 50%;
    top: 10%; bottom: 10%; /* ä¸é¡¶å¤©ç«‹åœ°ï¼Œæ›´åƒæ‚¬æµ®çš„èƒ½é‡æŸ */
    width: 1px;
    background: linear-gradient(to bottom, transparent, var(--base-gold), transparent);
    z-index: 10;
    pointer-events: none;
    transition: left 1.2s var(--transition-curve), opacity 0.5s ease;
    box-shadow: 0 0 8px var(--base-gold);
    animation: gold-pulse 4s infinite ease-in-out;
  }

  @keyframes gold-pulse {
    0%, 100% { opacity: 0.4; box-shadow: 0 0 5px var(--base-gold); }
    50% { opacity: 0.8; box-shadow: 0 0 15px var(--base-gold); }
  }

  /* æ‚¬åœäº¤äº’æ—¶ï¼Œé‡‘çº¿éšåŠ¨é€»è¾‘ç”± flex å¸ƒå±€è‡ªç„¶é©±åŠ¨ï¼Œ
     ä½†åœ¨è§†è§‰ä¸Šæˆ‘ä»¬è®©å®ƒæ·¡åŒ–ï¼Œä»¿ä½›å› ä¸ºä¸¤ç•Œèåˆè€Œæ¶ˆå¤± */
  .rift-wrapper:hover .rift-divider {
    opacity: 0; 
    transition-duration: 0.3s;
  }

  /* --- [ å†…å®¹æ’ç‰ˆ ] --- */
  .rift-content {
    position: relative;
    z-index: 3;
    text-align: center;
    color: #fff;
    padding: 40px;
    max-width: 500px;
    /* åˆå§‹çŠ¶æ€ï¼šæ–‡å­—æ¸…æ™° */
    opacity: 1;
    transform: translateY(0);
    transition: all 0.8s var(--transition-curve);
  }

  /* æœªè¢«æ‚¬åœæ—¶ï¼Œæ–‡å­—éšé¢æ¿ä¸€èµ·æ¨¡ç³Š/æ¶ˆéš */
  .rift-wrapper:hover .rift-panel:not(:hover) .rift-content {
    opacity: 0;
    transform: translateY(20px);
  }
  
  /* è¢«æ‚¬åœæ—¶ï¼Œæ–‡å­—ä¸Šæµ®æ˜¾ç° */
  .rift-panel:hover .rift-content {
    transform: translateY(-10px);
  }

  .rift-subtitle {
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5em;
    color: var(--base-gold);
    margin-bottom: 20px;
    display: block;
    opacity: 0.9;
  }

  .rift-title {
    font-family: var(--font-heading-family);
    font-size: clamp(32px, 5vw, 60px);
    font-weight: 300; /* æ›´è½»ç›ˆçš„å­—ä½“ */
    line-height: 1.1;
    letter-spacing: 0.02em;
    margin-bottom: 40px;
    text-shadow: 0 10px 30px rgba(0,0,0,0.9);
  }

  /* æŒ‰é’®ï¼šæç®€çº¿æ¡ */
  .rift-btn {
    display: inline-block;
    padding: 14px 36px;
    border: 1px solid rgba(255,255,255,0.2);
    color: #fff;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.25em;
    transition: all 0.5s ease;
    background: rgba(0,0,0,0.3);
    backdrop-filter: blur(4px);
  }

  .rift-panel:hover .rift-btn {
    border-color: var(--base-gold);
    color: var(--base-gold);
    background: rgba(0,0,0,0.6);
    box-shadow: 0 0 25px rgba(212, 175, 55, 0.2);
  }

  /* --- [ ç§»åŠ¨ç«¯é€‚é… ] --- */
  @media screen and (max-width: 768px) {
    .rift-wrapper { flex-direction: column; height: var(--gate-height-mb); }
    .rift-panel { width: 100%; flex: 1 !important; filter: none !important; }
    .rift-divider { width: 80%; height: 1px; left: 10%; top: 50%; bottom: auto; }
    
    /* ç§»åŠ¨ç«¯ä¿ç•™ç‚¹å‡»åé¦ˆï¼Œä½†ä¸åšå‰§çƒˆçš„æ¨¡ç³Šäº¤äº’ */
    .rift-content { opacity: 1 !important; transform: none !important; }
    .rift-title { font-size: 32px; }
  }
{%- endstyle -%}

<div class="rift-wrapper">
  
  <div class="rift-divider"></div>

  {% comment %} === LEFT GATE (SPIRIT / YIN) === {% endcomment %}
  <a href="{{ section.settings.link_1 }}" class="rift-panel panel-left">
    <div class="rift-media-container">
      {% comment %} ä¼˜å…ˆæ˜¾ç¤ºè§†é¢‘ {% endcomment %}
      {% if section.settings.video_1 != blank %}
        {{ section.settings.video_1 | video_tag: autoplay: true, loop: true, muted: true, playsinline: true, controls: false, image_size: '1200x' }}
      {% elsif section.settings.image_1 != blank %}
        {{ section.settings.image_1 | image_url: width: 1600 | image_tag: loading: 'lazy', alt: section.settings.title_1 }}
      {% else %}
        <div style="width:100%;height:100%;background:#0a0a0a;"></div>
      {% endif %}
    </div>
    <div class="rift-overlay"></div>
    
    <div class="rift-content">
      <span class="rift-subtitle">{{ section.settings.subtitle_1 }}</span>
      <h2 class="rift-title">{{ section.settings.title_1 }}</h2>
      <span class="rift-btn">{{ section.settings.btn_1 }}</span>
    </div>
  </a>

  {% comment %} === RIGHT GATE (MATTER / YANG) === {% endcomment %}
  <a href="{{ section.settings.link_2 }}" class="rift-panel panel-right">
    <div class="rift-media-container">
      {% if section.settings.video_2 != blank %}
        {{ section.settings.video_2 | video_tag: autoplay: true, loop: true, muted: true, playsinline: true, controls: false, image_size: '1200x' }}
      {% elsif section.settings.image_2 != blank %}
        {{ section.settings.image_2 | image_url: width: 1600 | image_tag: loading: 'lazy', alt: section.settings.title_2 }}
      {% else %}
        <div style="width:100%;height:100%;background:#111;"></div>
      {% endif %}
    </div>
    <div class="rift-overlay"></div>
    
    <div class="rift-content">
      <span class="rift-subtitle">{{ section.settings.subtitle_2 }}</span>
      <h2 class="rift-title">{{ section.settings.title_2 }}</h2>
      <span class="rift-btn">{{ section.settings.btn_2 }}</span>
    </div>
  </a>

</div>

{% schema %}
{
  "name": "â›©ï¸ Rift Gate (Dynamic)",
  "settings": [
    {
      "type": "header",
      "content": "ğŸ“ Layout"
    },
    {
      "type": "range",
      "id": "section_height_pc",
      "min": 50,
      "max": 100,
      "step": 5,
      "unit": "vh",
      "label": "Desktop Height",
      "default": 95
    },
    {
      "type": "range",
      "id": "section_height_mb",
      "min": 60,
      "max": 100,
      "step": 5,
      "unit": "vh",
      "label": "Mobile Height",
      "default": 80
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "min": 0,
      "max": 90,
      "step": 10,
      "unit": "%",
      "label": "Vignette Darkening",
      "default": 30
    },
    {
      "type": "header",
      "content": "ğŸŒ‘ Left Gate (Spirit/Yin)"
    },
    {
      "type": "video",
      "id": "video_1",
      "label": "Background Video (Micro-motion)"
    },
    {
      "type": "image_picker",
      "id": "image_1",
      "label": "Fallback Image"
    },
    {
      "type": "text",
      "id": "subtitle_1",
      "label": "Subtitle",
      "default": "THE VOID"
    },
    {
      "type": "text",
      "id": "title_1",
      "label": "Heading",
      "default": "Spirit"
    },
    {
      "type": "text",
      "id": "btn_1",
      "label": "Button",
      "default": "ENTER"
    },
    {
      "type": "url",
      "id": "link_1",
      "label": "Link"
    },
    {
      "type": "header",
      "content": "ğŸŒ• Right Gate (Matter/Yang)"
    },
    {
      "type": "video",
      "id": "video_2",
      "label": "Background Video (Light/Texture)"
    },
    {
      "type": "image_picker",
      "id": "image_2",
      "label": "Fallback Image"
    },
    {
      "type": "text",
      "id": "subtitle_2",
      "label": "Subtitle",
      "default": "THE FORM"
    },
    {
      "type": "text",
      "id": "title_2",
      "label": "Heading",
      "default": "Matter"
    },
    {
      "type": "text",
      "id": "btn_2",
      "label": "Button",
      "default": "EXPLORE"
    },
    {
      "type": "url",
      "id": "link_2",
      "label": "Link"
    }
  ],
  "presets": [
    {
      "name": "â›©ï¸ Rift Gate (Dynamic)"
    }
  ]
}
{% endschema %}
